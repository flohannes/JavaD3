<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="https://d3js.org/d3.v4.js"></script>
<style>
body{ font: Arial 12px; text-align: center;}
.axis path, .axis line{
fill: none;
stroke: black;
stroke-width: 1;
shape-rendering: crispEdges;
}
</style>
</head>
<body>
<div id="my_dataviz"></div>
<script>

	var chart = <%- chart %>

	//Set margins and sizes
	var margin = {
	top: 20,
	bottom: 50,
	right: 30,
	left: 50
	};
	
	var width = chart.width;
	var height = chart.height;
	
	console.log(chart.maxdate);
	console.log(chart.maxval);
	
	// append the svg object to the body of the page
	var svg = d3.select("#my_dataviz")
	  .append("svg")
	    .attr("width", width + margin.left + margin.right)
	    .attr("height", height + margin.top + margin.bottom)
	  .append("g")
	    .attr("transform",
	          "translate(" + margin.left + "," + margin.top + ")");
	
	//Read the data
	var data = chart.data; 
	console.log(data);
	
	  // Add X axis
	  var x = d3.scaleLinear()
	    .domain([chart.mindate, chart.maxdate])
	    .range([ 0, width ]);
	  svg.append("g")
	    .attr("transform", "translate(0," + height + ")")
	    .call(d3.axisBottom(x));
	
	  // Add Y axis
	  var y = d3.scaleLinear()
	    .domain([chart.minval, chart.maxval])
	    .range([ height, 0]);
	  svg.append("g")
	    .call(d3.axisLeft(y));
	
	  // Add dots
	  svg.append('g')
	    .selectAll("dot")
	    .data(data)
	    .enter()
	    .append("circle")
	      .attr("cx", function (d) { return x(d.date); } )
	      .attr("cy", function (d) { return y(d.value); } )
	      .attr("r", 1.5)
	      .style("fill", "#69b3a2")
	


</script>
</body>
</html>